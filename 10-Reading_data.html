<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Manual Basico da Linguagem R - 11&nbsp; Lendo dados</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./11-Manipulating_data.html" rel="next">
<link href="./09-R-Packages.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Lendo dados</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Manual Basico da Linguagem R</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">index.html</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-prefacio.html" class="sidebar-item-text sidebar-link">Prefácio <strong>da Segunda Edição</strong></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introdução</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-Instalation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Instalação do R e do RStudio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-RStudio.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">RStudio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-R-Projects.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Projetos do R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-R-Objects-Variables-Vectors.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Objetos do R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-Dataframes-and-Tibbles.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data Frames e Tibbles</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-Operators.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Operadores no R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-R-Functions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Funções no R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-R-Packages.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Pacotes do R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-Reading_data.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Lendo dados</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-Manipulating_data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Manipulando dados</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-Ploting_graphics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Gráficos</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-Statistical_Analysis.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Análises Estatísticas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-Distributions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Distribuições de Probabilidade</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-Simulations.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Simulações</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-Datasets.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Datasets</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-Conclusion.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Conclusão</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#formatos-de-arquivos-de-dados." id="toc-formatos-de-arquivos-de-dados." class="nav-link active" data-scroll-target="#formatos-de-arquivos-de-dados."><span class="toc-section-number">11.1</span>  Formatos de arquivos de dados.</a></li>
  <li><a href="#os-arquivos-.csv" id="toc-os-arquivos-.csv" class="nav-link" data-scroll-target="#os-arquivos-.csv"><span class="toc-section-number">11.2</span>  Os arquivos .csv</a></li>
  <li><a href="#lendo-dados-com-o-menu-do-rstudio." id="toc-lendo-dados-com-o-menu-do-rstudio." class="nav-link" data-scroll-target="#lendo-dados-com-o-menu-do-rstudio."><span class="toc-section-number">11.3</span>  Lendo dados com o menu do RStudio.</a></li>
  <li><a href="#lendo-dados-com-read.csv" id="toc-lendo-dados-com-read.csv" class="nav-link" data-scroll-target="#lendo-dados-com-read.csv"><span class="toc-section-number">11.4</span>  Lendo dados com <code>read.csv()</code></a></li>
  <li><a href="#lendo-arquivos-na-internet" id="toc-lendo-arquivos-na-internet" class="nav-link" data-scroll-target="#lendo-arquivos-na-internet"><span class="toc-section-number">11.5</span>  Lendo arquivos na internet</a></li>
  <li><a href="#lendo-dados-com-readr" id="toc-lendo-dados-com-readr" class="nav-link" data-scroll-target="#lendo-dados-com-readr"><span class="toc-section-number">11.6</span>  Lendo dados com <code>readr</code></a></li>
  <li><a href="#a-função-read_csv" id="toc-a-função-read_csv" class="nav-link" data-scroll-target="#a-função-read_csv"><span class="toc-section-number">11.7</span>  A função <code>read_csv()</code></a></li>
  <li><a href="#lendo-arquivos-em-outros-formatos" id="toc-lendo-arquivos-em-outros-formatos" class="nav-link" data-scroll-target="#lendo-arquivos-em-outros-formatos"><span class="toc-section-number">11.8</span>  Lendo arquivos em outros formatos</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-reading" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Lendo dados</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Neste capítulo, exploraremos como ler dados no R a partir de diferentes formatos de arquivos. A capacidade de importar dados corretamente é crucial para qualquer análise de dados, pois impacta diretamente a qualidade e a precisão dos resultados. Vamos começar com uma visão geral dos diferentes formatos de arquivos de dados e, em seguida, aprenderemos a ler esses dados utilizando funções base do R e funções do pacote readr do <code>tidyverse</code>. Finalmente, veremos como importar dados de outros formatos comuns, como arquivos Excel, JSON e XML.</p>
<p>Até agora a maioria dos exemplos usados foram de bancos de dados do próprio R e, portanto, não foi necessário ler ou carregar nenhum banco de dados. Entretanto, ler dados externos é uma das primeiras etapas de um processo de análise de dados. Com o R podemos ler dados em diversos formatos.</p>
<section id="formatos-de-arquivos-de-dados." class="level2" data-number="11.1">
<h2 data-number="11.1" class="anchored" data-anchor-id="formatos-de-arquivos-de-dados."><span class="header-section-number">11.1</span> Formatos de arquivos de dados.</h2>
<p>Vamos primeiro entender esses diferentes formatos de arquivos de dados. Cada documento em digital possui uma estrutura particular. por exemplos, aquivos <code>.doc</code> ou <code>.docx</code> do Word possuem uma estrutura própria da Microsoft, que o aplicativo Word compreende e, portanto, consegue abrir. Arquivos do tipo PDF (<code>.pdf</code>) possuem uma outra estrutura e, portanto, necessitam de softwares que saibam ler essa estrutura para poderem serem abertos.</p>
<p>Existem diversos formatos de arquivos para armazenar dados, cada um apropriado para ser lido por determinados aplicativos. As letras finais em cada arquivo, depois do ponto final (extensão), indicam o tipo de arquivo. Vejamos alguns tipos comuns de arquivos</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/file-extensions.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">file extensions</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Alguns formatos de arquivos dependem de um software específico para sua leitura. Outros formatos são menos específicos, podendo ser lidos por um grande número de softwares, como é o caso dos arquivos <code>.txt</code> e dos arquivos <code>.pdf</code>. Esses formatos são mais universais, sendo padrões comuns para comunicação de informações. Dados de pesquisa, em formato de tabelas como mostrado, são usualmente armazenados em arquivos próprios para essa finalidade. Um formato comum é o usado por softwares de planilhas eletrônicas como o Excel da Microsoft. Existem inúmeros softwares desse tipo e cada um utiliza um formato específico, o que é justamente a desvantagem desse formato. o Excel usa arquivos que terminam com a extensão <code>.xls</code> ou <code>.xlsx</code>, o software de planilhas da Apple usa arquivos que terminam com a extensão <code>.numbers</code>, etc. O problema é que cada arquivo desse só pode ser lido pelo próprio software que criou o arquivo.</p>
<p>Um dos formatos mais usuais para arquivar dados é o <code>.csv</code>, que em inglês significa “comma-separated values”, ou seja “dados separados por vírgulas” <span class="citation" data-cites="csv2005 csv2016">(<a href="references.html#ref-csv2005" role="doc-biblioref">Shafranovich 2005</a>; <a href="references.html#ref-csv2016" role="doc-biblioref">Mitlöhner et al. 2016</a>)</span>. Esse é um formato comum de arquivo de dados suportado por inúmeros softwares em todas as plataformas de computador (Mac, Windows, Linux etc), sendo por isso mesmo um dos tipos de arquivos mais usados para transferência de dados entre programas. Todo software de planilhas, tal como o Excel (PC ou Mac), Numbers (Mac), Libre Office etc. são capazes de ler e salvar os dados nesse formato.</p>
</section>
<section id="os-arquivos-.csv" class="level2" data-number="11.2">
<h2 data-number="11.2" class="anchored" data-anchor-id="os-arquivos-.csv"><span class="header-section-number">11.2</span> Os arquivos .csv</h2>
<p>A extensão <code>.csv</code> no final do nome de um arquivo indica que esse é um arquivo de dados no formato separado por vírgulas. A estrutura desse arquivo é bastante simples: existem várias linhas, cada linha com vários dados, separados por vírgulas.</p>
<p>Existem, entretanto variações nesse formato, por exemplo, no Brasil as casas decimais são separadas por vírgulas, nesse caso o delimitador dos valores não poderia ser a vírgula e é usado então o ponto e vírgula. Portanto, ao ler dados no formato <code>.csv</code> é sempre importante informar se os dados são separados por <code>,</code> ou <code>;</code> e se o separador do decimal é a virgula, ou o ponto final. Caso contrário a leitura dos dados poderá ser corrompida. Um outro detalhe é que, em alguns arquivos, os valores faltantes são indicados por <code>NA</code>, em outros por um espaço em branco, ou por outro símbolo. É importante informar ao R como esses valores faltantes estão indicados no arquivo.</p>
<p>Um arquivo de dados do tipo <code>.csv</code> pode ser visualizado através de qualquer leitor simples de texto, tal como o TextEdit do Mac ou o o Notepad no Windows. Abaixo podemos ver como um conjunto de dados simples está gravada num arquivo separado por vírgulas. Observe que a primeira linha representa o nome das variáveis.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/csv1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">csv_files</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Os arquivos <code>.csv</code> podem ser lidos por softwares de planilhas eletrônicas, tal como o Excel ou Numbers. A figura abaixo mostra como o Excel interpreta a primeira linha como sendo a dos nomes das variáveis e já separa as variáveis nas colunas e os dados de cada participante nas linhas.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/csv_excel.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">csv_files</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Existem diversos modos de carregar dados no R. Podemos fazer isso usando os menus do RStudio ou através das funções do R base (<code>read.csv</code>, <code>read.csv2</code>, <code>read.delim</code>, etc.) ou com as funções de leitura mais modernas do pacote <code>readr</code> (<code>read_csv</code>, <code>read_csv2</code>, etc.), que faz parte do <code>tidyverse</code>. Vamos ver como fazer isso de cada uma dessas formas.</p>
</section>
<section id="lendo-dados-com-o-menu-do-rstudio." class="level2" data-number="11.3">
<h2 data-number="11.3" class="anchored" data-anchor-id="lendo-dados-com-o-menu-do-rstudio."><span class="header-section-number">11.3</span> Lendo dados com o menu do RStudio.</h2>
<p>O painel <strong>Enviroment</strong> possui uma aba chamada <strong>Import Dataset</strong>. Ao clicar nessa opção, podemos escolher que tipo de dados serão importatos (lidos): Texto, Excel, SPSS, SAS ou STATA. Para ler arquivos do tipo <code>.csv</code> podemos usar qualquer das duas primeiras opções <strong>From Text (base)</strong> ou <strong>From Text (readr)</strong>, como mostra a figura abaixo.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/import_dataset.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">ImportDataset</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Você deverá escolher o aquivo <code>.csv</code> que deseja carregar no R. Será aberta uma aba para definir algumas opções.</p>
<p>A figura abaixo mostra a janela de opções que será aberta ao clicar em <strong>From Text (base)</strong>.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/import_dataset_artrite.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">ImportDataset_artrite</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>Você deverá informar ao R alguns parâmetros:</strong>.<br>
</p>
<ol type="1">
<li>Heading: Há um cabeçalho com o nome das variáveis?<br>
</li>
<li>As linhas tem nomes?<br>
</li>
<li>Qual o elemento que separa os valores? Virgula, ponto e vírgula, tabulação ou outro?<br>
</li>
<li>Qual o element que separal o decimal: Vírgula ou ponto final?<br>
</li>
<li>Há elementos entre aspas? Qual tipo de aspas são usados: ” ” ou ’ ’ ?<br>
</li>
<li>Há algum simbolo para comentários?<br>
</li>
<li>Como estão registrados os valore NA: NA, em branco, ou de outra forma?<br>
</li>
<li>Você deseja que os elementos em texto sejam carregados no formato <code>factor</code>?</li>
</ol>
<p>O R já deverá ter escolhido a maioria desses parâmetros. Se deu tudo certo, os dados deverão aparecer na janela inferior, chamada de data frame, todos alinhados em colunas como mostrado a imagem acima. Agora basta clicar em <code>import</code>.</p>
<p>Entretanto, apesar da facilidade de importar dados dessa forma. Essa não é a maneira ideal. A melhor técnica é criar o código que irá realizar a importação e incoporar esse código no início de seu script. Assim, automatizamos o processo de leitura dos dados e evitamos ter de clicar na função <code>Import Dataset</code> toda vez que formos trabalhar com nossos dados.</p>
</section>
<section id="lendo-dados-com-read.csv" class="level2" data-number="11.4">
<h2 data-number="11.4" class="anchored" data-anchor-id="lendo-dados-com-read.csv"><span class="header-section-number">11.4</span> Lendo dados com <code>read.csv()</code></h2>
<p>Caso o arquivo esteja no formato <code>.csv</code> com as seus valores separados por vírgula (que é o padrão usual), podemos usar a função <code>read.csv( )</code> para carregar os dados, bastando indicar o nome do arquivo a ser lido. Se por acaso o arquivo se chama <code>diabetes.csv</code>, então o comando de leitura será:</p>
<p><code>read.csv(file = "diabetes.csv")</code>.</p>
<p>O primeiro argumento da função <code>read.csv</code> é o mais importante, é o <strong>caminho</strong> e o <strong>nome do arquivo</strong> a ser lido. Um detalhe importante é saber qual é o <code>working directory</code> que você está usando. Lembre-se que a melhor forma de trabalhar no RStudio é criando um projeto, que define o diretório de trabalho como a pasta do projeto. Já detalhamos isso em capítulos anteriores sobre Working Directories e Projetos do RStudio (<a href="04-R-Projects.html"><span>Chapter&nbsp;5</span></a>).</p>
<p>O código acima ira funcionar se o arquivo chamado <code>diabetes.csv</code> estiver dentro do atual diretório de trabalho do R.</p>
<p>Se o arquivo estiver numa pasta chamada <code>dataset</code>, dentro do diretório de trabalho, então teremos de incluir esse caminho no nome, tudo dentro das aspas, como abaixo:</p>
<p><code>read.csv(file = "dataset/diabetes.csv")</code>.</p>
<p>Ou seja, com os dados no formato <code>csv</code>, a leitura dos dados é extremamente fácil com o comando acima. Esse comando lê o arquivo chamado <code>diabetes.csv</code>, que está na pasta <code>dataset</code>, dentro do diretório de trabalho atual.</p>
<p>Mas falta ainda um detalhe: é preciso colocar os dados lidos numa variável. O comando correto deve ser parecido com a linha abaixo.</p>
<p><code>mydata &lt;- read.csv(file = "dataset/diabetes.csv")</code></p>
<p>No caso acima a variável, ou melhor, o objeto, que vai receber os dados foi chamado de <code>mydata</code> e os dados estão sendo lidos de um arquivo chamado <code>diabetes.csv</code>. Dessa forma, os dados são lidos e colocados na variável <code>mydata</code>. Você verá que, ao ler um arquivo de dados dessa forma, o objeto <code>mydata</code> será um <strong>data frame</strong>, com linhas representando cada paciente (observação) e colunas representando as variáveis da pesquisa.</p>
<p>Caso o arquivo contenha dados separados por <code>ponto e vírgula</code>, a função a ser usada é <code>read.csv2()</code>:</p>
<p><code>mydata &lt;- read.csv2(file = "dataset/diabetes.csv")</code></p>
<p>Ambas as funções <code>read.csv()</code> e <code>read.csv2()</code> são derivadas da função <code>read.table()</code>. Essas funções podem receber diversos argumentos para otimizar a leitura dos dados.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/read.table.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">read.table</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>O comando acima poderia ser reescrito com todos esses argumentos de forma <strong>explícita</strong> como abaixo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>diabetes <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="at">file       =</span><span class="st">"dataset/diabetes.csv"</span>, </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">header     =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">sep        =</span> <span class="st">","</span>,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">dec        =</span> <span class="st">"."</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">na.strings =</span> <span class="st">"NA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>O código acima faz o seguinte:</p>
<ul>
<li>Lê um arquivo denominado <code>diabetes.csv</code>; que está na pasta <code>dataset</code><br>
</li>
<li>No qual há um cabeçalho com os nomes da variáveis: <code>header = TRUE</code><br>
</li>
<li>Cujos dados estão separados por vírgula: <code>sep = ","</code><br>
</li>
<li>Cujos decimais são identificados pelo ponto final : <code>dec  = "."</code><br>
</li>
<li>E os valores faltantes estão intensificados no arquivo pelas letras NA: <code>na.strings = "NA"</code>.<br>
</li>
<li>Finalmente, esse data frame é armazenado num objeto chamado <code>diabetes</code>.</li>
</ul>
</section>
<section id="lendo-arquivos-na-internet" class="level2" data-number="11.5">
<h2 data-number="11.5" class="anchored" data-anchor-id="lendo-arquivos-na-internet"><span class="header-section-number">11.5</span> Lendo arquivos na internet</h2>
<p>Lembre-se que o principal argumento da função <code>read.csv()</code> é o caminho do arquivo. Podemos também usar um caminho de um arquivo na internet. O arquivo <code>diabetes.csv</code> pode ser obtido na internet no site do departamento de estatística da Universidade de Vanderbilt.</p>
<p>A página com os bancos de dados pode ser acessada no seguinte link: <a href="https://hbiostat.org/data" class="uri">https://hbiostat.org/data</a></p>
<p>É possível então navegar por essa página e fazer o download manualmente do dataset <code>diabetes.csv</code>.</p>
<p>Mas podemos automatizar esse processo inserindo o endereço exato do banco de dados na função <code>read.csv()</code>: <a href="https://hbiostat.org/data/repo/diabetes.csv" class="uri">https://hbiostat.org/data/repo/diabetes.csv</a></p>
<p>Veja o código abaixo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"https://hbiostat.org/data/repo/diabetes.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>na verdade nem precisamos explicitar o argumento <code>file</code>, podemos inserir apenas o endereço e obteremos o mesmo resultado. Lembre-se que é preciso colocar o endereço entre aspas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://hbiostat.org/data/repo/diabetes.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lendo-dados-com-readr" class="level2" data-number="11.6">
<h2 data-number="11.6" class="anchored" data-anchor-id="lendo-dados-com-readr"><span class="header-section-number">11.6</span> Lendo dados com <code>readr</code></h2>
<p>O pacote <code>readr</code> do <code>tidyverse</code> fornece funções para leitura mais amigável de dados tabulados (como <code>.csv</code>, <code>.tsv</code> e <code>.fwf</code>), sendo preferírel em relação às funções base do R.</p>
<p>O pacote <code>readr</code> vem também com diversos bancos de dados para servirem de exemplo, que podem ser acessados com a função <code>readr_example()</code>. Para a lista completa dos exemplos basta usar esse comando como mostrado a seguir.</p>
<p>Lembre-se que para usar as funções de algum pacote é preciso primeiro instalar o pacote com o comando <code>install.packages()</code> no console. Além disso, no corpo do código, é preciso inserir o comando <code>library()</code> com o nome do pacote que será usado. Só precisamos inserir o comando <code>library()</code> uma única vez. O estilo ideal de escrever é sempre carregar os pacotes necessários no início do código.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">readr_example</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "challenge.csv"               "chickens.csv"               
 [3] "epa78.txt"                   "example.log"                
 [5] "fwf-sample.txt"              "massey-rating.txt"          
 [7] "mini-gapminder-africa.csv"   "mini-gapminder-americas.csv"
 [9] "mini-gapminder-asia.csv"     "mini-gapminder-europe.csv"  
[11] "mini-gapminder-oceania.csv"  "mtcars.csv"                 
[13] "mtcars.csv.bz2"              "mtcars.csv.zip"             
[15] "whitespace-sample.txt"      </code></pre>
</div>
</div>
<p>Quando inserimos o nome do do banco de dados desejado como argumento da função, o resultado é o endereço do banco de dados em seu computador.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readr_example</span>(<span class="st">"chickens.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/henriquealvarenga/Library/Caches/org.R-project.R/R/renv/cache/v5/macos/R-4.4/aarch64-apple-darwin20/readr/2.1.5/9de96463d2117f6ac49980577939dfb3/readr/extdata/chickens.csv"</code></pre>
</div>
</div>
<p>Agora, para podermos usar esse banco de dados, basta usar a função <code>read_csv()</code> usando esse endereço, como feito abaixo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="fu">readr_example</span>(<span class="st">"chickens.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  chicken                 sex     eggs_laid motto                               
  &lt;chr&gt;                   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;                               
1 Foghorn Leghorn         rooster         0 That's a joke, ah say, that's a jok…
2 Chicken Little          hen             3 The sky is falling!                 
3 Ginger                  hen            12 Listen. We'll either die free chick…
4 Camilla the Chicken     hen             7 Bawk, buck, ba-gawk.                
5 Ernie The Giant Chicken rooster         0 Put Captain Solo in the cargo hold. </code></pre>
</div>
</div>
<p>Podemos usar o pipe para o código ficar mais limpo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readr_example</span>(<span class="st">"chickens.csv"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 5 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (3): chicken, sex, motto
dbl (1): eggs_laid

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  chicken                 sex     eggs_laid motto                               
  &lt;chr&gt;                   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;                               
1 Foghorn Leghorn         rooster         0 That's a joke, ah say, that's a jok…
2 Chicken Little          hen             3 The sky is falling!                 
3 Ginger                  hen            12 Listen. We'll either die free chick…
4 Camilla the Chicken     hen             7 Bawk, buck, ba-gawk.                
5 Ernie The Giant Chicken rooster         0 Put Captain Solo in the cargo hold. </code></pre>
</div>
</div>
<p>Finalmente, o código acima apenas lê os dados e mostra, mas precisamos armazenar os dados num objeto na memória do R, como feito a seguir:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>galinhas <span class="ot">&lt;-</span> <span class="fu">readr_example</span>(<span class="st">"chickens.csv"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">read_csv</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 5 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (3): chicken, sex, motto
dbl (1): eggs_laid

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>Observe que a função <code>readr()</code> mostra os detalhes do que ela fez:<br>
1. Mostra que o arquivo lido tinha 5 linhas e 4 colunas.<br>
2. Mostra que interpretou que o delimitador entre os elementos era a vírgula: <code>Delimiter: ","</code>.<br>
3. Mostra que intrepretou as variáveis <code>chicken</code>, <code>sex</code> e <code>motto</code> como texto (<code>char</code>, caracteres).<br>
4. Mostra que intrepretou a variável <code>eggs_laid</code> como numérica (<code>double</code>).<br>
5. Explica que você pode usar o comando <code>spec()</code> para ver as especificações das colunas<br>
6. Explica que você pode usar o argumento <code>show_col_types = FALSE</code> para que o comando não mostre essas explicações todas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>galinhas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  chicken                 sex     eggs_laid motto                               
  &lt;chr&gt;                   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;                               
1 Foghorn Leghorn         rooster         0 That's a joke, ah say, that's a jok…
2 Chicken Little          hen             3 The sky is falling!                 
3 Ginger                  hen            12 Listen. We'll either die free chick…
4 Camilla the Chicken     hen             7 Bawk, buck, ba-gawk.                
5 Ernie The Giant Chicken rooster         0 Put Captain Solo in the cargo hold. </code></pre>
</div>
</div>
<p>Vamos repetir a leitura, agora com o argumento <code>show_col_types = FALSE</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>galinhas <span class="ot">&lt;-</span> <span class="fu">readr_example</span>(<span class="st">"chickens.csv"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">read_csv</span>(<span class="at">show_col_types =</span> <span class="cn">FALSE</span>) <span class="co"># lendo os dados sem mostrar todas as explicações</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Podemos verificar esses detalhes com a função <code>spec()</code>. Observe que essa função vai inspecionar o objeto que recebeu o arquivo que foi lido (<code>galinhas</code>) e não o arquivo <code>csv</code>. Portanto o argumento é <code>galinhas</code> não <code>chickens.csv</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span>(galinhas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>cols(
  chicken = col_character(),
  sex = col_character(),
  eggs_laid = col_double(),
  motto = col_character()
)</code></pre>
</div>
</div>
</section>
<section id="a-função-read_csv" class="level2" data-number="11.7">
<h2 data-number="11.7" class="anchored" data-anchor-id="a-função-read_csv"><span class="header-section-number">11.7</span> A função <code>read_csv()</code></h2>
<p>As funções de leitura do pacote <code>readr</code> tem diversas vantagens sobre as funções básicas de leitura de dados do R.</p>
<p>Em primeiro lugar, ao ler os dados usando <code>read_csv()</code> é criada uma <code>tibble</code> e não um <code>data frame</code>. E como já discutirmos antes, uma <code>tibble</code> é uma versão melhorada de um <code>data frame</code>.</p>
<p>Além disso, a função <code>read_csv()</code> é mais rápida que a versão base do R.</p>
<p>Em resumo, sugiro usar a função <code>read_csv()</code> ou <code>read_csv2()</code> do pacote <code>readr</code> em vez das funções base do R <code>read.csv()</code> e <code>read.csv2()</code>.</p>
<section id="argumentos-de-read_csv-ou-read_csv2" class="level4" data-number="11.7.0.1">
<h4 data-number="11.7.0.1" class="anchored" data-anchor-id="argumentos-de-read_csv-ou-read_csv2"><span class="header-section-number">11.7.0.1</span> Argumentos de <code>read_csv()</code> ou <code>read_csv2()</code></h4>
<p>As funções do pacote <code>readr</code> podem ser ajustadas com diversos argumentos.</p>
<p>O primeiro argumento é o mais importante, é o caminho e o nome do arquivo a ser lido. Um detalhe importante é saber qual é o <code>working directory</code> que você está usando. Lembre-se que a melhor forma de trabalhar no RStudio é criando um projeto, que define o diretório de trabalho como a pasta do projeto. Já detalhamos isso em capítulos anteriores sobre Working Directories e Projetos do RStudio (<a href="04-R-Projects.html"><span>Chapter&nbsp;5</span></a>).</p>
<p>O arquivo <code>diabetes.csv</code> que eu tenho em meu computador está salvo na pasta <code>dataset</code>, dentro da pasta do meu projeto. Portanto, preciso informar isso nos argumentos da função <code>read_csv()</code>.</p>
<p>É necessário também armazenar os dados lidos num objeto, que irei chamar de <code>diabetes</code>. Obs: eu poderia escolher outro nome, não é necessário que o objeto que irá armazenar os dados tenha o mesmo nome que o arquivo com os dados.</p>
<p>Eu fiz o o download dos dados (<a href="https://hbiostat.org/data/repo/diabetes.csv" class="uri">https://hbiostat.org/data/repo/diabetes.csv</a>) e e salvei esses dados numa pasta chamada <code>dataset</code> em meu projeto, então o código para ler esses dados é o seguinte. Nesse meu arquivo eu já modifiquei alguns dos nomes das variáveis para portugues.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>diabetes <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"dataset/diabetes.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 403 Columns: 18
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (3): cidade, sexo, biotipo
dbl (15): n, id, colesterol, glicose, hdl, ratio, glicohemoglobina, idade, a...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>Podemos ler esses dados diretamente do site, como já fizemos anteriormente, nesse arquivo os nomes das variáveis ainda estão com os nomes originais em inglês.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>diabetes <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://hbiostat.org/data/repo/diabetes.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 403 Columns: 19
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (3): location, gender, frame
dbl (16): id, chol, stab.glu, hdl, ratio, glyhb, age, height, weight, bp.1s,...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>Para mostrar a <code>tibble</code> basta digitar no console o nome da <code>tibble</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>diabetes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 403 × 19
      id  chol stab.glu   hdl ratio glyhb location     age gender height weight
   &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;
 1  1000   203       82    56  3.60  4.31 Buckingham    46 female     62    121
 2  1001   165       97    24  6.90  4.44 Buckingham    29 female     64    218
 3  1002   228       92    37  6.20  4.64 Buckingham    58 female     61    256
 4  1003    78       93    12  6.5   4.63 Buckingham    67 male       67    119
 5  1005   249       90    28  8.90  7.72 Buckingham    64 male       68    183
 6  1008   248       94    69  3.60  4.81 Buckingham    34 male       71    190
 7  1011   195       92    41  4.80  4.84 Buckingham    30 male       69    191
 8  1015   227       75    44  5.20  3.94 Buckingham    37 male       59    170
 9  1016   177       87    49  3.60  4.84 Buckingham    45 male       69    166
10  1022   263       89    40  6.60  5.78 Buckingham    55 female     63    202
# ℹ 393 more rows
# ℹ 8 more variables: frame &lt;chr&gt;, bp.1s &lt;dbl&gt;, bp.1d &lt;dbl&gt;, bp.2s &lt;dbl&gt;,
#   bp.2d &lt;dbl&gt;, waist &lt;dbl&gt;, hip &lt;dbl&gt;, time.ppn &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Observe que as variáveis <code>location</code>, <code>gender</code> e <code>frame</code> foram intrepretadas como <code>char</code>. Essas variáveis são melhor analisadas quando são do tipo <code>factor</code>. Temos duas alternativas para resolver esse problema:</p>
<ol type="1">
<li>Transformar em <code>factor</code> depois de ler, com a função <code>as.factor()</code>.</li>
<li>Indicar que são <code>factor</code> na própria função <code>read_csv()</code>.</li>
</ol>
<p>Vamos ver como fazer isso de cada uma dessas maneiras.</p>
<p><strong>Transformando variáveis em factor depois de ler os dados</strong></p>
<p>A função <code>as.factor()</code> tem como argumento um vetor, um dataframe ou uma tibble.</p>
<ol type="1">
<li>Transformando um vetor numérico em factor:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criando um vetor numérico</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># verificando a estrutura do vetor x antes de transformar em factor</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> int [1:10] 1 2 3 4 5 6 7 8 9 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transformando em factor</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(x)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co"># verificando a estrutura do vetor x2 depois de transformar em factor</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Factor w/ 10 levels "1","2","3","4",..: 1 2 3 4 5 6 7 8 9 10</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Transformando um vetor de caracteres em factor:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criando um vetor com caracteres</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"A"</span>,<span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co"># verificando a estrutura do vetor x antes de transformar em factor</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:4] "A" "B" "C" "D"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transformando em factor</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(x)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="co"># verificando a estrutura do vetor x2 depois de transformar em factor</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Factor w/ 4 levels "A","B","C","D": 1 2 3 4</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Transformando uma coluna de um data frame ou tibble em factor</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>diabetes<span class="sc">$</span>location  <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(diabetes<span class="sc">$</span>location)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>diabetes<span class="sc">$</span>gender    <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(diabetes<span class="sc">$</span>gender)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>diabetes<span class="sc">$</span>frame     <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(diabetes<span class="sc">$</span>frame)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Veja que agora essas variáveis são do tipo factor.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(diabetes) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>spc_tbl_ [403 × 19] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ id      : num [1:403] 1000 1001 1002 1003 1005 ...
 $ chol    : num [1:403] 203 165 228 78 249 248 195 227 177 263 ...
 $ stab.glu: num [1:403] 82 97 92 93 90 94 92 75 87 89 ...
 $ hdl     : num [1:403] 56 24 37 12 28 69 41 44 49 40 ...
 $ ratio   : num [1:403] 3.6 6.9 6.2 6.5 8.9 ...
 $ glyhb   : num [1:403] 4.31 4.44 4.64 4.63 7.72 ...
 $ location: Factor w/ 2 levels "Buckingham","Louisa": 1 1 1 1 1 1 1 1 1 1 ...
 $ age     : num [1:403] 46 29 58 67 64 34 30 37 45 55 ...
 $ gender  : Factor w/ 2 levels "female","male": 1 1 1 2 2 2 2 2 2 1 ...
 $ height  : num [1:403] 62 64 61 67 68 71 69 59 69 63 ...
 $ weight  : num [1:403] 121 218 256 119 183 190 191 170 166 202 ...
 $ frame   : Factor w/ 3 levels "large","medium",..: 2 1 1 1 2 1 2 2 1 3 ...
 $ bp.1s   : num [1:403] 118 112 190 110 138 132 161 NA 160 108 ...
 $ bp.1d   : num [1:403] 59 68 92 50 80 86 112 NA 80 72 ...
 $ bp.2s   : num [1:403] NA NA 185 NA NA NA 161 NA 128 NA ...
 $ bp.2d   : num [1:403] NA NA 92 NA NA NA 112 NA 86 NA ...
 $ waist   : num [1:403] 29 46 49 33 44 36 46 34 34 45 ...
 $ hip     : num [1:403] 38 48 57 38 41 42 49 39 40 50 ...
 $ time.ppn: num [1:403] 720 360 180 480 300 195 720 1020 300 240 ...
 - attr(*, "spec")=
  .. cols(
  ..   id = col_double(),
  ..   chol = col_double(),
  ..   stab.glu = col_double(),
  ..   hdl = col_double(),
  ..   ratio = col_double(),
  ..   glyhb = col_double(),
  ..   location = col_character(),
  ..   age = col_double(),
  ..   gender = col_character(),
  ..   height = col_double(),
  ..   weight = col_double(),
  ..   frame = col_character(),
  ..   bp.1s = col_double(),
  ..   bp.1d = col_double(),
  ..   bp.2s = col_double(),
  ..   bp.2d = col_double(),
  ..   waist = col_double(),
  ..   hip = col_double(),
  ..   time.ppn = col_double()
  .. )
 - attr(*, "problems")=&lt;externalptr&gt; </code></pre>
</div>
</div>
<p><strong>Transformando variáveis em factor no momento da leitura dos dados</strong></p>
<p>Podemos usar o argumento <code>col_types</code> da função <code>read_csv()</code> para indicarmos qual o tipo correto da variável de cada coluna ou de algumas colunas em particular. No código abaixo foi indicado que as colunas (variáveis) <code>sexo</code>, <code>cidade</code> e <code>biotipo</code> deveriam ser interpretadas como <code>factor</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>diabetes <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://hbiostat.org/data/repo/diabetes.csv"</span>, </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">col_types =</span> <span class="fu">list</span>(<span class="at">gender   =</span> <span class="fu">col_factor</span>(), </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">location =</span> <span class="fu">col_factor</span>(),</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">frame    =</span> <span class="fu">col_factor</span>()))</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(diabetes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>spc_tbl_ [403 × 19] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ id      : num [1:403] 1000 1001 1002 1003 1005 ...
 $ chol    : num [1:403] 203 165 228 78 249 248 195 227 177 263 ...
 $ stab.glu: num [1:403] 82 97 92 93 90 94 92 75 87 89 ...
 $ hdl     : num [1:403] 56 24 37 12 28 69 41 44 49 40 ...
 $ ratio   : num [1:403] 3.6 6.9 6.2 6.5 8.9 ...
 $ glyhb   : num [1:403] 4.31 4.44 4.64 4.63 7.72 ...
 $ location: Factor w/ 2 levels "Buckingham","Louisa": 1 1 1 1 1 1 1 1 1 1 ...
 $ age     : num [1:403] 46 29 58 67 64 34 30 37 45 55 ...
 $ gender  : Factor w/ 2 levels "female","male": 1 1 1 2 2 2 2 2 2 1 ...
 $ height  : num [1:403] 62 64 61 67 68 71 69 59 69 63 ...
 $ weight  : num [1:403] 121 218 256 119 183 190 191 170 166 202 ...
 $ frame   : Factor w/ 3 levels "medium","large",..: 1 2 2 2 1 2 1 1 2 3 ...
 $ bp.1s   : num [1:403] 118 112 190 110 138 132 161 NA 160 108 ...
 $ bp.1d   : num [1:403] 59 68 92 50 80 86 112 NA 80 72 ...
 $ bp.2s   : num [1:403] NA NA 185 NA NA NA 161 NA 128 NA ...
 $ bp.2d   : num [1:403] NA NA 92 NA NA NA 112 NA 86 NA ...
 $ waist   : num [1:403] 29 46 49 33 44 36 46 34 34 45 ...
 $ hip     : num [1:403] 38 48 57 38 41 42 49 39 40 50 ...
 $ time.ppn: num [1:403] 720 360 180 480 300 195 720 1020 300 240 ...
 - attr(*, "spec")=
  .. cols(
  ..   id = col_double(),
  ..   chol = col_double(),
  ..   stab.glu = col_double(),
  ..   hdl = col_double(),
  ..   ratio = col_double(),
  ..   glyhb = col_double(),
  ..   location = col_factor(levels = NULL, ordered = FALSE, include_na = FALSE),
  ..   age = col_double(),
  ..   gender = col_factor(levels = NULL, ordered = FALSE, include_na = FALSE),
  ..   height = col_double(),
  ..   weight = col_double(),
  ..   frame = col_factor(levels = NULL, ordered = FALSE, include_na = FALSE),
  ..   bp.1s = col_double(),
  ..   bp.1d = col_double(),
  ..   bp.2s = col_double(),
  ..   bp.2d = col_double(),
  ..   waist = col_double(),
  ..   hip = col_double(),
  ..   time.ppn = col_double()
  .. )
 - attr(*, "problems")=&lt;externalptr&gt; </code></pre>
</div>
</div>
</section>
</section>
<section id="lendo-arquivos-em-outros-formatos" class="level2" data-number="11.8">
<h2 data-number="11.8" class="anchored" data-anchor-id="lendo-arquivos-em-outros-formatos"><span class="header-section-number">11.8</span> Lendo arquivos em outros formatos</h2>
<p>O R também pode ler arquivos em outros formatos, tal como Excel, SAS, STATA, SPSS etc. Existem pacotes específicos para ler cada um desses formatos.<br>
</p>
<p>O pacote <code>readxl</code> serve para ler arquivos do Excel, sendo capaz de ler <code>.xls</code> quanto os novos formatos <code>.xlsx</code>. A função para ler esses arquivos é <code>read_excel()</code>.<br>
O pacote <code>XML</code> é capaz de ler arquivos XML, a função para ler esses arquivos é <code>xmlParse()</code> ou <code>xmlToDataFrame()</code>.<br>
Os pacotes <code>rjson</code> e <code>jsonlite</code> tem funções para leitura arquivos JSON. A função para ler esses arquivos é <code>fromJSON()</code>.<br>
O pacote <code>haven</code> do tidyverse é capaz de ler vários de vários tipos, tais como SAS, SPSS e STATA, através das seguintes funções: <code>read_sas()</code>, <code>read_sav()</code>, <code>read_por()</code>, <code>read_dta()</code>, <code>read_xpt()</code>.<br>
O pacote <code>foreign</code> possui também funções para ler arquivos SPSS, a função para ler esses arquivos é <code>read.spss()</code>.</p>
<p><strong>Tabela de Funções e Pacotes de Leitura de Dados</strong></p>
<table class="table">
<colgroup>
<col style="width: 12%">
<col style="width: 9%">
<col style="width: 27%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Função</th>
<th>Pacote</th>
<th>Descrição</th>
<th>Exemplo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>read.table()</code></td>
<td>base</td>
<td>Leitura de arquivos tabulares</td>
<td><code>data &lt;- read.table("file.txt", header = TRUE)</code></td>
</tr>
<tr class="even">
<td><code>read.csv()</code></td>
<td>base</td>
<td>Leitura de arquivos CSV</td>
<td><code>data &lt;- read.csv("https://hbiostat.org/data/repo/diabetes.csv")</code></td>
</tr>
<tr class="odd">
<td><code>read_csv()</code></td>
<td>readr</td>
<td>Leitura de arquivos CSV</td>
<td><code>data &lt;- read_csv("https://hbiostat.org/data/repo/diabetes.csv")</code></td>
</tr>
<tr class="even">
<td><code>read_excel()</code></td>
<td>readxl</td>
<td>Leitura de arquivos Excel</td>
<td><code>data &lt;- read_excel("file.xlsx", sheet = 1)</code></td>
</tr>
<tr class="odd">
<td><code>fromJSON()</code></td>
<td>jsonlite</td>
<td>Leitura de arquivos JSON</td>
<td><code>data &lt;- fromJSON("file.json")</code></td>
</tr>
<tr class="even">
<td><code>read_xml()</code></td>
<td>xml2</td>
<td>Leitura de arquivos XML</td>
<td><code>data &lt;- read_xml("file.xml")</code></td>
</tr>
<tr class="odd">
<td><code>read_sas()</code></td>
<td>haven</td>
<td>Leitura de arquivos SAS</td>
<td><code>data &lt;- read_sas("file.sas7bdat")</code></td>
</tr>
<tr class="even">
<td><code>read_sav()</code></td>
<td>haven</td>
<td>Leitura de arquivos SAV</td>
<td><code>data &lt;- read_sav("file.sav")</code></td>
</tr>
<tr class="odd">
<td><code>read_dta()</code></td>
<td>haven</td>
<td>Leitura de arquivos Stata</td>
<td><code>data &lt;- read_dta("file.dta")</code></td>
</tr>
<tr class="even">
<td><code>read_por()</code></td>
<td>haven</td>
<td>Leitura de arquivos POR</td>
<td><code>data &lt;- read_por("file.por")</code></td>
</tr>
<tr class="odd">
<td><code>read_xpt()</code></td>
<td>haven</td>
<td>Leitura de arquivos transportados</td>
<td><code>data &lt;- read_xpt("file.xpt")</code></td>
</tr>
<tr class="even">
<td><code>read_stata()</code></td>
<td>haven</td>
<td>Leitura de arquivos Stata</td>
<td><code>data &lt;- read_stata("file.dta")</code></td>
</tr>
<tr class="odd">
<td><code>read_spss()</code></td>
<td>foreign</td>
<td>Leitura de arquivos SPSS</td>
<td><code>data &lt;- read.spss("file.sav", to.data.frame = TRUE)</code></td>
</tr>
</tbody>
</table>


<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography" style="display: none">
<div id="ref-csv2016" class="csl-entry" role="doc-biblioentry">
Mitlöhner, Johann, Sebastian Neumaier, Jürgen Umbrich, and Axel Polleres. 2016. <span>“Characteristics of Open Data CSV Files.”</span> In <em>2016 2nd International Conference on Open and Big Data (OBD)</em>, 72–79. <a href="https://doi.org/10.1109/OBD.2016.18">https://doi.org/10.1109/OBD.2016.18</a>.
</div>
<div id="ref-csv2005" class="csl-entry" role="doc-biblioentry">
Shafranovich, Yakov. 2005. <span>“Common Format and MIME Type for Comma-Separated Values (CSV) Files.”</span> <a href="https://www.rfc-editor.org/rfc/pdfrfc/rfc4180.txt.pdf">https://www.rfc-editor.org/rfc/pdfrfc/rfc4180.txt.pdf</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./09-R-Packages.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Pacotes do R</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./11-Manipulating_data.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Manipulando dados</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>